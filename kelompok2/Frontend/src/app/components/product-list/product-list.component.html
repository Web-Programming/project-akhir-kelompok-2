<div class="product-list-container">
  <div class="filter-buttons">
    <button (click)="filterProducts('')">All</button>
    <button (click)="filterProducts('Breakfast')">Breakfast</button>
    <button (click)="filterProducts('Lunch')">Lunch</button>
    <button (click)="filterProducts('Desserts')">Desserts</button>
    <button (click)="filterProducts('Drink')">Drink</button>
  </div>

  <div class="products">
    <div *ngFor="let product of filteredProducts" class="product-card">
      <img 
        [src]="product.imageUrl.startsWith('http') ? product.imageUrl : 'http://localhost:5000' + product.imageUrl" 
        [alt]="product.name"
        class="product-image"
      >
      <div class="product-details">
        <h3>{{ product.name }}</h3>
        <p class="description">{{ product.description }}</p>
        <p class="price">Rp{{ product.price.toLocaleString('id-ID') }}</p>
        <p class="stock" [class.out-of-stock]="product.stock === 0">
          {{ product.stock === 0 ? 'Stok Habis' : 'Stok: ' + product.stock }}
        </p>
        <div class="quantity-control" *ngIf="product.stock > 0">
          <button 
            (click)="decreaseQuantity(product)" 
            [disabled]="getQuantity(product) <= 1"
          >-</button>
          <span>{{ getQuantity(product) }}</span>
          <button 
            (click)="increaseQuantity(product)"
            [disabled]="getQuantity(product) >= product.stock"
          >+</button>
        </div>
        <button 
          class="add-to-cart-btn"
          (click)="addToCart(product)"
          [disabled]="product.stock === 0"
          [class.out-of-stock]="product.stock === 0"
        >
          {{ product.stock === 0 ? 'Stok Habis' : 'Tambah ke Keranjang' }}
        </button>
      </div>
    </div>
  </div>
</div>
